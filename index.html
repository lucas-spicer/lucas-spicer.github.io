<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff" id="theme-meta">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Lucas Spicer | Designer & Front-End Developer</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;1,400&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="shortcut icon" type="image/png" href="assets/images/favicon.png">
    
    <script>
        // FLASH PREVENTION: Check theme before body renders
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark-mode');
                // Set meta color immediately if possible
                document.querySelector(':root').style.setProperty('--bg', '#181818');
            }
        })();
    </script>
</head>
<body>

<header class="header">
    <div class="header-inner">
        <a href="javascript:void(0)" onclick="showSection('work')" class="ald-logo">LUCAS SPICER</a>
        
        <button class="menu-toggle" onclick="toggleMenu()" aria-label="Toggle Menu">
            <span class="bar"></span>
            <span class="bar"></span>
        </button>

        <nav class="main-nav">
            <ul class="nav-links">
                <li><a onclick="handleNav('work')" id="link-work" class="active">Work</a></li>
                <li><a onclick="handleNav('about')" id="link-about">About</a></li>
                <li><a onclick="handleNav('contact')" id="link-contact">Contact</a></li>
                <li><button id="theme-btn" class="theme-toggle" onclick="toggleTheme()">Dark</button></li>
            </ul>
        </nav>
    </div>
</header>

<div class="header-spacer"></div>

<main class="main-content">
    <section id="work" class="page-section active-section">
        <div class="project-grid">
            <article class="project-item" onclick="showSection('watermelon')">
                <div class="image-container"><img src="assets/images/watermelon/watermelon.png" alt="Watermelon"></div>
                <div class="project-info"><span class="title">Watermelon</span><span class="category">Rebrand</span></div>
            </article>
            <article class="project-item" onclick="showSection('calico')">
                <div class="image-container"><img src="assets/images/calico/calico.png" alt="Calico"></div>
                <div class="project-info"><span class="title">Calico</span><span class="category">Creation</span></div>
            </article>
            <article class="project-item" onclick="showSection('canvas')">
                <div class="image-container"><img src="assets/images/Canvas.png" alt="Canvas"></div>
                <div class="project-info"><span class="title">Canvas</span><span class="category">Bespoke</span></div>
            </article>
            <article class="project-item" onclick="showSection('design')">
                <div class="image-container"><img src="assets/images/design/design.png" alt="Design"></div>
                <div class="project-info"><span class="title">Design</span><span class="category">Ad-Hoc</span></div>
            </article>
            <article class="project-item" onclick="showSection('print')">
                <div class="image-container"><img src="assets/images/print/print.png" alt="Print"></div>
                <div class="project-info"><span class="title">Print</span><span class="category">Branding</span></div>
            </article>
            <article class="project-item" onclick="showSection('inspiration')">
                <div class="image-container"><img src="assets/images/inspiration/inspiration.png" alt="Inspiration"></div>
                <div class="project-info"><span class="title">Inspiration</span><span class="category">Curation</span></div>
            </article>
        </div>
    </section>

    <section id="watermelon" class="page-section">
        <div class="project-detail-container">
            <aside class="detail-sidebar">
                <div class="sticky-content">
                    <h1 class="serif-italic">Watermelon</h1>
                    <p class="category">Rebrand</p>
                    <div class="detail-description">
                        <p class="description-lead">Brand redesign and workflow overhaul.</p>
                        <p>I led the complete brand overhaul for Watermelon, redesigning their entire visual identity. My work included creating a new website, logos, and a full suite of templates and presentation decks.</p>
                    </div>
                    <div class="detail-specs">
                        <div class="spec-item"><span>Role</span><span>Creative Lead</span></div>
                        <div class="spec-item"><span>Skills</span><span>HTML, CSS, Figma</span></div>
                    </div>
                    <div class="detail-navigation">
                        <a href="javascript:void(0)" onclick="showSection('work')" class="nav-link">← Return</a>
                        <a href="javascript:void(0)" onclick="nextProject()" class="nav-link">Next Project →</a>
                    </div>
                </div>
            </aside>
            <div class="detail-gallery">
                <img src="assets/images/watermelon/watermelon-1.png" alt="detail 1">
                <img src="assets/images/watermelon/watermelon-2.png" alt="detail 2">
            </div>
        </div>
    </section>

    <section id="about" class="page-section">
        <div class="about-container">
            <h2 class="h2-title">About</h2>
            <p class="bio-intro">Designer & Front-End Developer</p>
            <p class="bio-intro-small">I design and develop digital products with a focus on balance and flow.</p>
        </div>
    </section>

    <section id="contact" class="page-section">
        <div class="about-container">
            <h2 class="h2-title">Contact</h2>
            <p class="bio-intro"><a href="mailto:lucasspicer@icloud.com">lucasspicer@icloud.com</a></p>
        </div>
    </section>
</main>

<script>
    const projectOrder = ['watermelon', 'calico', 'canvas', 'design', 'print', 'inspiration'];
    let currentProjectIndex = 0;

    function showSection(sectionId) {
        document.querySelectorAll('.page-section').forEach(sec => sec.classList.remove('active-section'));
        const target = document.getElementById(sectionId);
        if(target) target.classList.add('active-section');
        
        document.querySelectorAll('.nav-links a').forEach(link => link.classList.remove('active'));
        if(['work', 'about', 'contact'].includes(sectionId)) {
            const navLink = document.getElementById('link-' + sectionId);
            if(navLink) navLink.classList.add('active');
        }

        const index = projectOrder.indexOf(sectionId);
        if (index !== -1) currentProjectIndex = index;
        window.scrollTo(0, 0);
    }

    function nextProject() {
        const nextIndex = (currentProjectIndex + 1) % projectOrder.length;
        showSection(projectOrder[nextIndex]);
    }

    function toggleMenu() {
        document.body.classList.toggle('mobile-menu-open');
    }

    function handleNav(sectionId) {
        document.body.classList.remove('mobile-menu-open');
        showSection(sectionId);
    }

    /* --- THEME LOGIC --- */

    function toggleTheme() {
        const htmlElement = document.documentElement;
        // Toggle on BOTH for compatibility
        const isDark = htmlElement.classList.toggle('dark-mode');
        document.body.classList.toggle('dark-mode', isDark);
        
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        updateThemeUI(isDark);

        // Safari Force Reflow (Fixes status bar update)
        htmlElement.style.display = 'none';
        htmlElement.offsetHeight; 
        htmlElement.style.display = '';
    }

    function updateThemeUI(isDark) {
        const btn = document.getElementById('theme-btn');
        const metaTheme = document.getElementById('theme-meta');
        const images = document.querySelectorAll('img');

        if (btn) btn.innerText = isDark ? 'Light' : 'Dark';
        if (metaTheme) metaTheme.setAttribute('content', isDark ? '#181818' : '#ffffff');

        images.forEach(img => {
            let currentSrc = img.getAttribute('src');
            if (!currentSrc) return;
            if (isDark) {
                if (!currentSrc.includes('-dark.png')) img.src = currentSrc.replace('.png', '-dark.png');
            } else {
                if (currentSrc.includes('-dark.png')) img.src = currentSrc.replace('-dark.png', '.png');
            }
        });
    }

    // Initial check on load
    document.addEventListener('DOMContentLoaded', () => {
        const isDark = localStorage.getItem('theme') === 'dark';
        if (isDark) {
            document.documentElement.classList.add('dark-mode');
            document.body.classList.add('dark-mode');
        }
        updateThemeUI(isDark);
    });
</script>

</body>
</html>
